<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Preferences</title>

    <script>

        function savePreferences() {
            fetch('/save-preferences/' + '[[${user.UserID}]]', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: new URLSearchParams({
                        'duration': document.getElementById("duration").value,
                        'tolls': document.getElementById("tolls").checked,
                        'location': document.getElementById("location").value,
                        'range': document.getElementById("range").value,
                        'interests': document.getElementById("interests").value
                    })
                })
                    .then(response => {
                        if (response.ok) {
                            alert('Preferences saved successfully.');
                        } else {
                            alert('Failed to save preferences.');
                        }
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
        }
    </script>
</head>
<body>
    <header>
        <nav class = "navbar navbar-expand-md bg-info h4 px-4 py-3 text-white" style = "min-height: 75px;">
            <!-- Website name-->
            <span class="fs-4 px-2"> JourneyGenie </span>

            <!-- Other pages -->
            <div class="navbar-collapse fs-5 d-flex justify-content-md-end justify-content-center">
                <ul class="navbar-nav">
                    <!-- Home -->
                    <form action="/home" method="GET">
                        <input type="submit" value="Home" class="btn btn-dark text-white mx-2"></input>
                    </form>

                    <!-- Routes -->
                    <form action="/map" method="GET">
                        <input type="submit" value="Routes" class="btn btn-dark text-white mx-2"></input>
                    </form>

                    <!-- Log out -->
                    <form action="/logout" method="POST">
                        <input type="submit" value="Log out" class="btn btn-danger text-white mx-2"></input>
                    </form>
                </ul>
            </div>
        </nav>
    </header>
    <main class = "container">

        <div style = "margin-top: 100px;">

                <h1 class="text-center mb-5">Preferences</h1>
                <form id="preferences" class="row justify-content-sm-center">
                    <label for="duration">Trip duration</label>
                    <input type="number" name="duration" id="duration" required> <br>
                    <label for="tolls">Allow tolls roads</label>
                    <input type="checkbox" name="tolls" id="tolls"> <br>
                    <label for="location">Prefered Country</label>
                    <input type="text" name="location" id="location" placeholder="country/leave empty for suggestions"> <br>
                    <label for="range">Max time between Activities</label>
                    <input type="number" name="range" id="range"> <br>
                    <label for="interests">Interests</label>
                    <input type="text" name="interests" id="interests" required> <br>
                    <input value="Add Interest" class="btn btn-dark text-white mx-2"></input>
                </form>
                <button onclick="savePreferences()" class = "btn btn-info text-white w-100">Save</button>

        </div>
    </main>
    
</body>
</html>